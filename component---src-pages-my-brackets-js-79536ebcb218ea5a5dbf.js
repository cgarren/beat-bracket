"use strict";(self.webpackChunkbeatbracket=self.webpackChunkbeatbracket||[]).push([[222],{8711:function(e,t,n){var a=n(7294),r=n(4184),l=n.n(r);t.Z=e=>{let{show:t,close:n,message:r,type:o}=e;const c={info:{styles:"bg-blue-100 text-blue-700",icon:a.createElement("path",{fill:"currentColor",d:"M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"})},success:{styles:"bg-green-100 text-green-700",icon:a.createElement("path",{fill:"currentColor",d:"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"})},error:{styles:"bg-red-100 text-red-700",icon:a.createElement("path",{fill:"currentColor",d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm121.6 313.1c4.7 4.7 4.7 12.3 0 17L338 377.6c-4.7 4.7-12.3 4.7-17 0L256 312l-65.1 65.6c-4.7 4.7-12.3 4.7-17 0L134.4 338c-4.7-4.7-4.7-12.3 0-17l65.6-65-65.6-65.1c-4.7-4.7-4.7-12.3 0-17l39.6-39.6c4.7-4.7 12.3-4.7 17 0l65 65.7 65.1-65.6c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3 0 17L312 256l65.6 65.1z"})},warning:{styles:"bg-yellow-100 text-yellow-700",icon:a.createElement("path",{fill:"currentColor",d:"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"})}};return a.createElement("div",{className:"fixed right-0 top-[38px] h-0 w-fit z-30",role:"alert"},a.createElement("div",{className:"w-fit h-fit rounded-lg text-sm p-4 "+(c[o]?c[o].styles:"")+" "+(t?"flex":"hidden")},a.createElement("svg",{"aria-hidden":"true",focusable:"false","data-icon":"check-circle",className:"w-5 h-5 mr-3 fill-current flex-shrink-0 inline",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},c[o]?c[o].icon:null),a.createElement("span",{className:"sr-only"},"Info"),a.createElement("div",null,a.createElement("span",{className:"font-bold mr-1 whitespace-nowrap"},r)),a.createElement("button",{type:"button",className:l()("ml-auto -mx-1.5 -my-1.5 border-none !text-black rounded-lg focus:ring-2 focus:ring-blue-400 p-1.5 hover:!text-current hover:bg-transparent inline-flex h-8 w-8",{[""+(c[o]?c[o].styles:"")]:c[o]}),"aria-label":"Close",onClick:()=>n()},a.createElement("span",{className:"sr-only"},"Close"),a.createElement("svg",{"aria-hidden":"true",className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})))))}},243:function(e,t,n){var a=n(7294);t.Z=e=>{let{onClose:t,children:n}=e;return a.createElement("div",{tabIndex:"-1",className:"fixed top-0 left-0 right-0 z-50 p-4 overflow-x-hidden overflow-y-auto inset-0 h-modal h-full bg-black bg-opacity-50"},a.createElement("div",{className:"absolute top-[50%] left-[50%] -translate-x-1/2 -translate-y-1/2 w-full max-w-md h-auto max-h-screen"},a.createElement("div",{className:"relative bg-white rounded-lg shadow"},a.createElement("button",{type:"button",className:"absolute top-3 right-2.5 text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center ",onClick:t},a.createElement("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})),a.createElement("span",{className:"sr-only"},"Close modal")),a.createElement("div",{className:"p-6 text-center"},n))))}},8285:function(e,t,n){n.d(t,{p:function(){return l}});var a=n(7294),r=n(1883);const l=e=>{let{title:t,description:n,pathname:l,children:o}=e;const{title:c,description:i,siteUrl:s}=(0,r.useStaticQuery)("3764592887").site.siteMetadata,m={title:t||c,description:n||i,url:""+s+(l||"")};return a.createElement(a.Fragment,null,a.createElement("title",null,m.title),a.createElement("meta",{name:"description",content:m.description}),a.createElement("meta",{name:"image",content:m.image}),o)}},4015:function(e,t,n){var a=n(7294);t.Z=e=>{let{artistName:t,art:n,onClick:r}=e;return a.createElement("button",{onClick:r,className:"text-l flex first:rounded-t-[inherit] last:rounded-b-[inherit] w-auto bg-white hover:bg-gray-100 focus-visible:bg-gray-100 focus:border-blue-500 focus-visible:border-blue-500 focus:bg-gray-100 cursor-pointer py-1 px-2 border border-[rgba(0,0,0,0.125)] items-center"},a.createElement("img",{src:n,alt:t,className:"h-10 w-10"}),"Â ",t)}},6998:function(e,t,n){n.r(t),n.d(t,{Head:function(){return M},default:function(){return U}});var a=n(7294),r=n(4442),l=n(8159),o=n(4661);var c=e=>{let{children:t,image:n,imageAlt:r,cardText:c,onClick:i=(()=>{}),removeFunc:s=null}=e;return a.createElement("div",{className:"relative"},s&&n?a.createElement(o.Z,{removeFunc:s}):null,a.createElement("button",{className:"text-center p-3",onClick:i,disabled:!n},a.createElement("div",{className:"rounded-lg w-[320px] h-[320px]"},n?a.createElement("img",{src:n,className:"w-[320px] h-[320px]",width:"320px",height:"320px",alt:r||"Bracket image"}):a.createElement(l.Z,{loadingText:"",hidden:!1})),t,a.createElement("div",{className:"w-[320px]"},c)))};function i(e){let{bracket:t}=e;return a.createElement("div",{className:"inline-flex gap-0.5"},a.createElement("span",null,t.artistName?t.artistName+" ("+t.tracks+" tracks)":"Getting brackets..."),t.winner||t.completed?a.createElement("span",{title:"Completed",className:"text-green-600 text-xs font-medium inline-flex items-center px-0.5 py-0.5 rounded-md"},a.createElement("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"}))):a.createElement("div",null))}var s=n(2618),m=n(5253),d=n(7066);var u=e=>{let{bracket:t,userId:n}=e;const{0:r,1:l}=(0,a.useState)(null);return a.useEffect((()=>{t.artistId&&async function(){const e="https://api.spotify.com/v1/artists/"+t.artistId,n=await(0,d.g7)(e);if(1===n)return null;return n.images[0].url}().then((e=>{l(e)}))}),[t]),a.createElement(c,{image:r,imageAlt:"Picture of "+t.artistName,cardText:t.artistId?a.createElement(i,{bracket:t}):"Loading...",removeFunc:async function(){window.confirm("Are you sure you want to permanently delete this "+t.artistName+" bracket?")&&(console.log("removing bracket"),0===await(0,m.nl)(t.id,n)&&window.location.reload())},onClick:()=>{(0,s.ig)(t.id,n)}})},g=n(4184),p=n.n(g);var f=e=>{let{text:t,activeTab:n,id:r,setActiveTab:l}=e;return a.createElement("button",{title:t+" tab",className:p()("py-4 px-6 block bg-transparent hover:bg-transparent hover:text-blue-700 hover:border-blue-700 focus:outline-none border-b-2 border-x-0 border-t-0 rounded-none font-medium",{"text-blue-700 border-blue-700":n===r},{"text-gray-600 border-transparent":n!==r}),onClick:()=>l(r)},t)},h=n.p+"static/createBracket-0d50326bd56d099bd40ebec3b048bc52.png";var b={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let v;const w=new Uint8Array(16);function E(){if(!v&&(v="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!v))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return v(w)}const x=[];for(let D=0;D<256;++D)x.push((D+256).toString(16).slice(1));function y(e,t=0){return(x[e[t+0]]+x[e[t+1]]+x[e[t+2]]+x[e[t+3]]+"-"+x[e[t+4]]+x[e[t+5]]+"-"+x[e[t+6]]+x[e[t+7]]+"-"+x[e[t+8]]+x[e[t+9]]+"-"+x[e[t+10]]+x[e[t+11]]+x[e[t+12]]+x[e[t+13]]+x[e[t+14]]+x[e[t+15]]).toLowerCase()}var k=function(e,t,n){if(b.randomUUID&&!t&&!e)return b.randomUUID();const a=(e=e||{}).random||(e.rng||E)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=a[e];return t}return y(a)},C=n(4015);var N=e=>{let{setArtist:t,disabled:n}=e;const{0:r,1:l}=(0,a.useState)(""),{0:o,1:c}=(0,a.useState)([]);return(0,a.useEffect)((()=>{!async function(){if(""!==r.trim()){var e="https://api.spotify.com/v1/search/?"+new URLSearchParams({q:r,type:"artist",limit:5}).toString();let n=await(0,d.g7)(e);if(1!==n&&n.artists.items.length>0){let e=[];n.artists.items.forEach((n=>{n.images.length>0&&e.push({name:n.name,art:n.images[2].url,id:n.id,onClick:()=>{t({name:n.name,id:n.id,art:n.images[2].url}),l("")}})})),c(e)}else c([])}else c([])}()}),[r]),(0,a.useEffect)((()=>{document.getElementById("searchbar").addEventListener("keydown",(e=>{"ArrowDown"===e.key&&(e.preventDefault(),document.getElementById("artist-list").children.length>0&&document.getElementById("artist-list").firstChild.focus())})),document.getElementById("artist-list").addEventListener("keydown",(e=>{document.getElementById("artist-list").children.length>0&&("ArrowUp"===e.key?(e.preventDefault(),e.stopPropagation(),document.activeElement===document.getElementById("artist-list").firstChild?document.getElementById("searchbar").focus():document.getElementById("artist-list").contains(document.activeElement)&&document.activeElement.previousSibling.focus()):"ArrowDown"===e.key&&(e.preventDefault(),e.stopPropagation(),document.getElementById("artist-list").contains(document.activeElement)&&document.activeElement.nextSibling&&document.activeElement.nextSibling.focus()))}))}),[]),a.createElement("div",{className:"inline-flex flex-col justify-items-center mb-2 place-items-center border-black border-0 rounded-md "},a.createElement("input",{placeholder:"Search for an artist...","aria-label":"Search for an artist...",size:"search",id:"searchbar",type:"search",spellCheck:!1,autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",autoFocus:!0,value:r,onChange:e=>l(e.target.value),className:"text-black text-2xl font-bar w-full p-1 border-2 border-gray-500 rounded focus:z-10 pl-3 mousetrap focus-visible:outline-none focus-visible:border-blue-500 focus-visible:border-1",disabled:n}),a.createElement("div",{id:"artist-list",className:"m-0 p-0 list-none flex-nowrap gap-0 inline-flex flex-col text-center w-full rounded"},o.map((e=>a.createElement(C.Z,{artistName:e.name,art:e.art,onClick:e.onClick,key:e.id})))))},I=n(243);var L=e=>{let{userId:t}=e;const{0:n,1:r}=(0,a.useState)(!1);return a.createElement("div",null,a.createElement(c,{image:h,imageAlt:"Plus sign",cardText:"Create Bracket",onClick:()=>{r(!0)}}),n?a.createElement(I.Z,{onClose:()=>r(!1)},a.createElement(N,{setArtist:function(e){if(e){const n=k();console.log("Create New Bracket with id: "+n),(0,s.ig)(n,t,{artist:e})}}})):null)},S=n(8711),B=n(4657),z=n(1883),T=n(8285),A=n(2054);var U=e=>{let{location:t}=e;const n=(0,m.hZ)(),{0:l,1:o}=(0,a.useState)([{id:1,userId:void 0,artistName:void 0,artistId:void 0,tracks:void 0,completed:!1}]),{0:c,1:i}=(0,a.useState)(0),s=(0,B.n5)(),{0:d,1:g}=(0,a.useState)({show:!1,message:null,type:null,timeoutId:null}),{0:p,1:h}=(0,a.useState)(!1),b=(0,a.useMemo)((()=>(console.log(l),l.filter((e=>0===c||(1===c?!e.completed&&!e.winner:2!==c||(e.completed||e.winner)))))),[c,l]),{setLoggedIn:v}=(0,a.useContext)(A.O);function w(e,t,n){void 0===t&&(t="info"),void 0===n&&(n=!0),d.timeoutId&&clearTimeout(d.timeoutId);let a=null;n&&(a=setTimeout((()=>{g({show:!1,message:null,type:null,timeoutId:null})}),5e3)),g({show:!0,message:e,type:t,timeoutId:a})}return(0,a.useEffect)((()=>window.scrollTo(0,0)),[]),(0,a.useEffect)((()=>{(async function(){const e=new URLSearchParams(window.location.search);window.history.replaceState({},document.title,window.location.pathname);try{return await(0,B.IS)(e,v)}catch(t){return console.log("Error authenticating:",t),h(!0),void w("Error authenticating","error",!1)}})().then((e=>{e?(0,m.fe)().then((e=>{1!==e?(console.log(e),o(e)):(console.log("Error loading brackets"),w("Error loading brackets, try logging in again","error",!1),h(!0))})):(console.log("going back to home page"),(0,z.navigate)("/"))}))}),[]),a.createElement(r.Z,{noChanges:()=>!0,path:t.pathname},a.createElement(S.Z,{show:d.show,close:function(){d.timeoutId&&clearTimeout(d.timeoutId),g({show:!1,message:null,type:null,timeoutId:null})},message:d.message,type:d.type}),a.createElement("div",{className:"text-center",hidden:p},a.createElement("h1",{className:"text-4xl font-extrabold font-display"},"My Brackets"),s&&n?a.createElement("p",{className:"text-sm text-gray-600 mb-2"},l.length+"/"+n+" brackets used"):null,a.createElement("div",{className:""},a.createElement("nav",{className:"inline-flex flex-row"},a.createElement(f,{id:0,activeTab:c,setActiveTab:i,text:"All"}),a.createElement(f,{id:1,activeTab:c,setActiveTab:i,text:"In Progess"}),a.createElement(f,{id:2,activeTab:c,setActiveTab:i,text:"Completed"}))),a.createElement("div",{className:"pt-3 flex flex-row flex-wrap justify-center items-stretch gap-5 sm:mx-5"},0===c&&n&&l.length<n&&s?a.createElement(L,{userId:s}):null,b.map((e=>a.createElement(u,{bracket:e,key:e.id,userId:s}))))))};function M(){return a.createElement(T.p,{title:"Beat Bracket - My brackets"})}}}]);
//# sourceMappingURL=component---src-pages-my-brackets-js-79536ebcb218ea5a5dbf.js.map